<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>?? ÂœÌÂ  Ê·œ Roya</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Vazirmatn', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #fff3e0, #ffe0f0);
      color: #333;
      text-align: center;
    }
    h1, h2 {
      color: #d81b60;
    }
    .stage {
      display: none;
      padding: 40px 20px;
      animation: fadeIn 1s ease-in-out;
    }
    .stage.active {
      display: block;
    }
    .btn {
      background: linear-gradient(to right, #ff4081, #f50057);
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 18px;
      border-radius: 50px;
      margin-top: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .btn:hover {
      background: linear-gradient(to right, #f50057, #ff4081);
    }
    .letter-box {
      display: inline-block;
      margin: 5px;
      padding: 12px 20px;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
      font-size: 22px;
    }
    .letter-box:hover {
      background: #fce4ec;
      transform: scale(1.1);
    }
    .cups {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
    }
    .cup {
      width: 80px;
      height: 120px;
      background: #795548;
      border-radius: 0 0 40px 40px;
      position: relative;
      transition: background 0.3s;
    }
    .cup:hover {
      background: #5d4037;
    }
    .ball {
      width: 30px;
      height: 30px;
      background-color: red;
      border-radius: 50%;
      position: absolute;
      bottom: -35px;
      left: 25px;
    }
    img.gif {
      max-width: 320px;
      border-radius: 16px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin: 20px auto;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <audio id="music1" src="Music1.mp3" loop autoplay></audio>
  <audio id="music2" src="Music2.mp3"></audio>

  <h1>?? ŒÊ‘ ¬„œÌ Roya Ã«‰!</h1>

  <!-- „—Õ·Â 1 -->
  <section id="stage1" class="stage active">
    <h2>‰«„  —« »« «‰ Œ«» Õ—Ê› Ê«—œ ò‰:</h2>
    <div id="letters1"></div>
    <p id="nameOutput"></p>
    <button id="toStage2" class="btn" style="display:none">«œ«„Â</button>
  </section>

  <!-- „—Õ·Â 2 -->
  <section id="stage2" class="stage">
    <h2> ÊÅ —« œ‰»«· ò‰!</h2>
    <img class="gif" src="https://dl.glitter-graphics.com/pub/2913/2913265fu2ygqeddb.gif" alt="Gif1">
    <div class="cups" id="cupsContainer"></div>
    <button id="toStage3" class="btn" style="display:none">»⁄œÌ</button>
  </section>

  <!-- „—Õ·Â 3 -->
  <section id="stage3" class="stage">
    <h2>„⁄„«: òœ«„ ò·Ìœ œ—Ì —« »«“ ‰„Ìùò‰œø</h2>
    <div id="letters3"></div>
    <p id="answerText"></p>
    <img class="gif" src="https://media.gifdb.com/blue-haired-anime-girl-dancing-2zc3cgush44nid16.gif" alt="Gif2">
    <button id="toStage4" class="btn" style="display:none">„—Õ·Â ‰Â«ÌÌ</button>
  </section>

  <!-- „—Õ·Â 4 -->
  <section id="stage4" class="stage">
    <h2>??  Ê·œ  „»«—ò ROYA ??</h2>
    <img class="gif" src="https://cliply.co/wp-content/uploads/2021/02/392102670_BIRTHDAY_CAKE_400px.gif" alt="Gif4">
    <p>«“ ÿ—› Ìò œÊ”  òÂ ŒÌ·Ì œÊ”   œ«—Â ??</p>
  </section>

  <script>
    const stages = ["stage1", "stage2", "stage3", "stage4"];
    const targetName = "—ÊÌ«";
    const alphabet = [..."«¬»Å ÀÃçÕŒœ–—“é”‘’÷ÿŸ⁄€›ﬁòê·„‰ÊÂÌ"];
    const correctAnswer = ["ò","·","Ì","œ","»","—","ﬁ"];

    let nameInput = "";
    let answerInput = [];
    let ballUnder = Math.floor(Math.random() * 3);

    const showStage = (id) => {
      stages.forEach(s => document.getElementById(s).classList.remove("active"));
      document.getElementById(id).classList.add("active");
    };

    const renderLetters = (containerId, onClick) => {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      alphabet.forEach(letter => {
        const box = document.createElement("div");
        box.className = "letter-box";
        box.textContent = letter;
        box.onclick = () => onClick(letter);
        container.appendChild(box);
      });
    };

    renderLetters("letters1", (letter) => {
      nameInput += letter;
      document.getElementById("nameOutput").textContent = nameInput;
      if (nameInput === targetName) {
        document.getElementById("toStage2").style.display = "inline-block";
      }
    });

    document.getElementById("toStage2").onclick = () => {
      showStage("stage2");
      renderCups();
    };

    function renderCups() {
      const container = document.getElementById("cupsContainer");
      container.innerHTML = "";
      for (let i = 0; i < 3; i++) {
        const cup = document.createElement("div");
        cup.className = "cup";
        cup.onclick = () => {
          if (i === ballUnder) {
            cup.innerHTML = '<div class="ball"></div>';
            document.getElementById("toStage3").style.display = "inline-block";
          } else {
            alert("«‘ »«Â »Êœ. œÊ»«—Â «„ Õ«‰ ò‰!");
          }
        };
        container.appendChild(cup);
      }
    }

    document.getElementById("toStage3").onclick = () => {
      showStage("stage3");
      renderLetters("letters3", (letter) => {
        answerInput.push(letter);
        document.getElementById("answerText").textContent = answerInput.join("");
        if (answerInput.join("") === correctAnswer.join("")) {
          document.getElementById("toStage4").style.display = "inline-block";
        }
      });
    };

    document.getElementById("toStage4").onclick = () => {
      showStage("stage4");
      document.getElementById("music1").pause();
      document.getElementById("music2").play();
    };
  </script>
</body>
</html>