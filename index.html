<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ØªÙˆÙ„Ø¯Øª Ù…Ø¨Ø§Ø±Ú© Ø±ÙˆÛŒØ§</title>
  <style>
    body {
      font-family: "Vazirmatn", sans-serif;
      background: linear-gradient(to bottom, #ffe0f0, #ffffff);
      text-align: center;
      padding: 20px;
      direction: rtl;
    }
    h1 {
      color: #e91e63;
      font-size: 2.5rem;
    }
    .stage {
      display: none;
      margin-top: 40px;
    }
    .btn {
      background-color: #e91e63;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 1rem;
      margin: 10px;
      cursor: pointer;
      border-radius: 10px;
      transition: background 0.3s;
    }
    .btn:hover {
      background-color: #d81b60;
    }
    .letter {
      display: inline-block;
      border: 2px solid #e91e63;
      padding: 10px;
      margin: 5px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 20px;
    }
    .selected {
      background-color: #f8bbd0;
    }
    .gif {
      width: 300px;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <h1>ğŸ‰ ØªÙˆÙ„Ø¯Øª Ù…Ø¨Ø§Ø±Ú© Ø±ÙˆÛŒØ§ ğŸ‰</h1>

  <div id="stage1" class="stage" style="display:block;">
    <h2>Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</h2>
    <div id="letters">
      <!-- Ø­Ø±ÙˆÙ Ø§Ù„ÙØ¨Ø§ ÙØ§Ø±Ø³ÛŒ -->
    </div>
    <p id="selectedName" style="font-size:20px;"></p>
    <button id="toStage2" class="btn" style="display:none;">Ø¨Ø±Ùˆ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯</button>
    <button onclick="resetName()" class="btn" style="background:#f44336;">Ù¾Ø§Ú© Ú©Ù†</button>
  </div>

  <div id="stage2" class="stage">
    <h2>Ø¨Ø§Ø²ÛŒ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ ğŸ’¡</h2>
    <p>Ø±ÙˆÛŒ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ Ú©Ù„ÛŒÚ© Ú©Ù† ØªØ§ Ù‡Ù…Ù‡â€ŒØ´ÙˆÙ† Ø±ÙˆØ´Ù† Ø¨Ø´Ù†!</p>
    <div id="lightsContainer" style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin:30px;"></div>
    <button id="toStage3" class="btn" style="display:none;">Ø¨Ø±Ùˆ Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Û³</button>
  </div>

  <div id="stage3" class="stage">
    <h2>Ù…Ø¹Ù…Ø§ ğŸ§ </h2>
    <p>Ú©Ø¯Ø§Ù… Ú©Ù„ÛŒØ¯ Ø§Ø³Øª Ú©Ù‡ Ù‡ÛŒÚ† Ø¯Ø±ÛŒ Ø±Ø§ Ø¨Ø§Ø² Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ</p>
    <div id="puzzleLetters"></div>
    <p id="selectedPuzzle" style="font-size:20px;"></p>
    <img class="gif" src="https://media.gifdb.com/blue-haired-anime-girl-dancing-2zc3cgush44nid16.gif" alt="Ù…Ø¹Ù…Ø§">
    <button id="toStage4" class="btn" style="display:none;">ğŸ‰ Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¢Ø®Ø±</button>
    <button onclick="resetPuzzle()" class="btn" style="background:#f44336;">Ù¾Ø§Ú© Ú©Ù†</button>
  </div>

  <div id="stage4" class="stage">
    <h2>ğŸ‚ ØªÙˆÙ„Ø¯Øª Ù…Ø¨Ø§Ø±Ú© Ø±ÙˆÛŒØ§ Ø¬Ø§Ù† ğŸ‚</h2>
    <img class="gif" src="https://cliply.co/wp-content/uploads/2021/02/392102670_BIRTHDAY_CAKE_400px.gif" alt="ØªÙˆÙ„Ø¯">
    <p style="font-size:22px; margin-top:20px;">Ø¨Ø§ Ø¢Ø±Ø²ÙˆÛŒ Ø¨Ù‡ØªØ±ÛŒÙ†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ ØªÙˆ ğŸŒŸ</p>
  </div>

  <script>
    let userName = "", puzzleInput = "";
    const answerName = "Ø±ÙˆÛŒØ§";
    const answerPuzzle = "Ú©Ù„ÛŒØ¯Ø¨Ø±Ù‚";
    const letters = "Ø¢Ø§Ø¨Ù¾ØªØ«Ø¬Ú†Ø­Ø®Ø¯Ø°Ø±Ø²Ú˜Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙ‚Ú©Ú¯Ù„Ù…Ù†ÙˆÙ‡ÛŒ".split("");

    const music1 = new Audio("Music1.mp3");
    const music2 = new Audio("Music2.mp3");
    music1.loop = true;
    music2.loop = true;

    function show(id) {
      document.querySelectorAll(".stage").forEach(s => s.style.display = "none");
      document.getElementById(id).style.display = "block";
    }

    // Ø³Ø§Ø®Øª Ø­Ø±ÙˆÙ Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ Û±
    const letterDiv = document.getElementById("letters");
    letters.forEach(l => {
      const span = document.createElement("span");
      span.textContent = l;
      span.className = "letter";
      span.onclick = () => {
        userName += l;
        document.getElementById("selectedName").textContent = userName;
        if (userName === answerName) {
          document.getElementById("toStage2").style.display = "inline-block";
        }
      };
      letterDiv.appendChild(span);
    });

    // Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†Ø§Ù…
    function resetName() {
      userName = "";
      document.getElementById("selectedName").textContent = "";
      document.getElementById("toStage2").style.display = "none";
    }

    // Ø¨Ø§Ø²ÛŒ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§
    document.getElementById("toStage2").onclick = () => {
      show("stage2");
      music1.play();

      const lightsCont = document.getElementById("lightsContainer");
      lightsCont.innerHTML = "";
      const lights = [];
      for (let i = 0; i < 6; i++) {
        let light = document.createElement("div");
        light.style.width = "60px";
        light.style.height = "60px";
        light.style.borderRadius = "50%";
        light.style.background = "#999";
        light.style.cursor = "pointer";
        light.onclick = () => {
          light.style.background = "#ffeb3b";
          lights[i] = true;
          if (lights.filter(Boolean).length === 6) {
            document.getElementById("toStage3").style.display = "inline-block";
          }
        };
        lightsCont.appendChild(light);
        lights.push(false);
      }
    };

    document.getElementById("toStage3").onclick = () => {
      show("stage3");

      // Ø³Ø§Ø®Øª Ø­Ø±ÙˆÙ Ù…Ø¹Ù…Ø§
      const puzzleDiv = document.getElementById("puzzleLetters");
      puzzleDiv.innerHTML = "";
      const shuffled = [...letters].sort(() => 0.5 - Math.random());
      shuffled.forEach(l => {
        const span = document.createElement("span");
        span.textContent = l;
        span.className = "letter";
        span.onclick = () => {
          puzzleInput += l;
          document.getElementById("selectedPuzzle").textContent = puzzleInput;
          if (puzzleInput === answerPuzzle) {
            document.getElementById("toStage4").style.display = "inline-block";
          }
        };
        puzzleDiv.appendChild(span);
      });
    };

    // Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ø¹Ù…Ø§
    function resetPuzzle() {
      puzzleInput = "";
      document.getElementById("selectedPuzzle").textContent = "";
      document.getElementById("toStage4").style.display = "none";
    }

    document.getElementById("toStage4").onclick = () => {
      music1.pause();
      music2.play();
      show("stage4");
    };
  </script>
</body>
</html>
